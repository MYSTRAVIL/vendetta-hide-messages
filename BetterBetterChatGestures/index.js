(function(A,i,e,C,a,m,V,r,R){"use strict";var p={Failed:r.getAssetIDByName("Small"),Delete:r.getAssetIDByName("ic_message_delete"),Copy:r.getAssetIDByName("toast_copy_link"),Open:r.getAssetIDByName("ic_leave_stage"),Clipboard:r.getAssetIDByName("pending-alert"),Clock:r.getAssetIDByName("clock"),Forum:r.getAssetIDByName("ic_forum_channel"),Settings:{Toasts:{Settings:r.getAssetIDByName("ic_selection_checked_24px"),Failed:r.getAssetIDByName("ic_close_circle_24px")},Initial:r.getAssetIDByName("coffee"),Update:r.getAssetIDByName("discover"),Locale:r.getAssetIDByName("ic_locale_24px"),External:r.getAssetIDByName("ic_raised_hand_list"),Edit:r.getAssetIDByName("ic_edit_24px"),Reply:r.getAssetIDByName("ic_reply_24px")}},E={shadow:function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.1;return{shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:n,shadowRadius:4.65,elevation:8}},displayToast:function(n,t){e.toasts.open({content:t=="clipboard"?`Copied ${n} to clipboard.`:n,source:t=="clipboard"?p.Clipboard:p.Settings.Initial})}},v={plugin:{source:"https://github.com/MYSTRAVIL/vendetta-plugins"},author:{profile:{"Rosie<3":"https://github.com/acquitelol"}}};const{TouchableOpacity:D,View:P,Image:Y,Text:_,Animated:S}=m.General,N=i.findByProps("transitionToGuild"),L=i.findByStoreName("UserStore"),G=i.findByProps("showUserProfile"),g=e.stylesheet.createThemedStyleSheet({container:{marginTop:25,marginLeft:"5%",marginBottom:-15,flexDirection:"row"},textContainer:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap",...E.shadow()},image:{width:75,height:75,borderRadius:10,...E.shadow()},mainText:{opacity:.975,letterSpacing:.25},header:{color:R.semanticColors.HEADER_PRIMARY,fontFamily:e.constants.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},subHeader:{color:R.semanticColors.HEADER_SECONDARY,fontSize:12.75}});function j(n){let{name:t,authors:d}=n;const o=e.React.useRef(new S.Value(1)).current,s=function(){return S.spring(o,{toValue:1.1,duration:10,useNativeDriver:!0}).start()},l=function(){return S.spring(o,{toValue:1,duration:250,useNativeDriver:!0}).start()},u=function(){return G.showUserProfile({userId:L.getCurrentUser().id})},f={transform:[{scale:o}]};return e.React.createElement(e.React.Fragment,null,e.React.createElement(P,{style:g.container},e.React.createElement(D,{onPress:u,onPressIn:s,onPressOut:l},e.React.createElement(S.View,{style:f},e.React.createElement(Y,{style:[g.image],source:{uri:L?.getCurrentUser()?.getAvatarURL()?.replace("webp","png")}}))),e.React.createElement(P,{style:g.textContainer},e.React.createElement(D,{onPress:function(){return N.openURL(v.plugin.source)}},e.React.createElement(_,{style:[g.mainText,g.header]},t)),e.React.createElement(P,{style:{flexDirection:"row"}},e.React.createElement(_,{style:[g.mainText,g.subHeader]},"A project by"),d.map(function(c,T,h){return e.React.createElement(D,{onPress:function(){return N.openURL(v.author.profile[c.name]??"https://github.com/")}},e.React.createElement(_,{style:[g.mainText,g.subHeader,{paddingLeft:4,fontFamily:e.constants.Fonts.DISPLAY_BOLD,flexDirection:"row"}]},c.name,T<h.length-1?",":null))})))))}const{View:k,Text:K}=m.General,O=e.stylesheet.createThemedStyleSheet({text:{color:R.semanticColors.HEADER_SECONDARY,paddingLeft:"5.5%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:12}});function U(n){let{label:t,children:d}=n;return e.React.createElement(k,{style:{marginTop:10}},e.React.createElement(K,{style:[O.text,O.optionText]},t.toUpperCase()),d)}const{FormRow:y,FormSwitch:w,FormDivider:I,FormInput:W,FormText:z}=m.Forms,{ScrollView:q,View:B,Text:X}=m.General,J=i.findByProps("transitionToGuild","openURL"),b=e.stylesheet.createThemedStyleSheet({icon:{color:R.semanticColors.INTERACTIVE_NORMAL},item:{color:R.semanticColors.TEXT_MUTED,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM},container:{width:"90%",marginLeft:"5%",borderRadius:10,backgroundColor:R.semanticColors.BACKGROUND_MOBILE_SECONDARY,...E.shadow()},subheaderText:{color:R.semanticColors.HEADER_SECONDARY,textAlign:"center",margin:10,marginBottom:50,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:14},image:{width:"100%",maxWidth:350,borderRadius:10}});function Q(){V.useProxy(a.storage);const[n,t]=e.React.useState(a.storage.tapUsernameMention),[d,o]=e.React.useState(a.storage.reply),[s,l]=e.React.useState(a.storage.userEdit),[u,f]=e.React.useState(a.storage.delay),c=e.ReactNative.Platform.OS==="android";return e.React.createElement(q,null,e.React.createElement(j,{name:a.manifest.name,authors:a.manifest.authors}),e.React.createElement(B,{style:{marginTop:20}},e.React.createElement(U,{label:"Preferences"},e.React.createElement(B,{style:[b.container]},e.React.createElement(y,{label:"Tap Username to Mention",subLabel:`Allows you to tap on a username to mention them instead of opening their profile.${c?"This option is disabled on Android.":""}`,onLongPress:function(){return E.displayToast("By default, Discord opens a profile when tapping on a username in chat. With this, it now mentions them, like on Android.","tooltip")},leading:e.React.createElement(y.Icon,{style:b.icon,source:n?p.Forum:p.Failed}),trailing:e.React.createElement(w,{value:c?!1:n,onValueChange:function(){c||(a.storage.tapUsernameMention=!a.storage.tapUsernameMention,t(a.storage.tapUsernameMention))}}),disabled:c}),e.React.createElement(I,null),e.React.createElement(y,{label:"Double Tap To Reply",subLabel:"Allows you to tap double tap on any messages to reply to them.",onLongPress:function(){return E.displayToast("When double tapping on any messages, you can now reply to them!","tooltip")},leading:e.React.createElement(y.Icon,{style:b.icon,source:d?p.Settings.Reply:p.Failed}),trailing:e.React.createElement(w,{value:d,onValueChange:function(){a.storage.reply=!a.storage.reply,o(a.storage.reply)}})}),e.React.createElement(I,null),e.React.createElement(y,{label:`${s?"Editing":"Replying to"} your own messages`,subLabel:`Allows you to tap double tap on any of your own messages to ${s?"reply to":"edit"} them.`,onLongPress:function(){return E.displayToast(`When double tapping on any of your own messages, you can now ${s?"start an edit":"reply to them"}!`,"tooltip")},leading:e.React.createElement(y.Icon,{style:b.icon,source:s?p.Settings.Edit:p.Settings.Reply}),trailing:e.React.createElement(w,{value:s,onValueChange:function(){a.storage.userEdit=!a.storage.userEdit,l(a.storage.userEdit)}})}),e.React.createElement(I,null),e.React.createElement(W,{value:u,onChange:function(T){a.storage.delay=T==""?300:Number(T),f(u)},placeholder:"300",title:"Maximum Delay"}),e.React.createElement(I,null),e.React.createElement(z,{style:{padding:10}},"The maximum delay between taps until the double tap event is cancelled. This is 300ms by default."))),e.React.createElement(U,{label:"Source"},e.React.createElement(B,{style:b.container},e.React.createElement(y,{label:"Source",subLabel:`Open the repository of ${a.manifest.name} externally.`,onLongPress:function(){return E.displayToast(`Opens the repository of ${a.manifest.name} on GitHub in an external page to view any source code of the plugin.`,"tooltip")},leading:e.React.createElement(y.Icon,{style:b.icon,source:p.Open}),trailing:function(){return e.React.createElement(y.Arrow,null)},onPress:function(){return J.openURL(v.plugin.source)}})))),e.React.createElement(X,{style:b.subheaderText},`Build: (${a.manifest.hash.substring(0,8)})`))}const F=i.findByProps("insertText"),Z=i.findByStoreName("ChannelStore"),$=i.findByStoreName("MessageStore"),x=i.findByStoreName("UserStore"),ee=i.findByProps("sendMessage","startEditMessage"),H=i.findByProps("createPendingReply"),{MessagesHandlers:M}=i.findByProps("MessagesHandlers"),te={unpatchGetter:null,unpatchHandlers:null,currentTapIndex:0,currentMessageAuthor:null,doubleTapState(n){let{state:t="UNKNOWN",nativeEvent:d}=n;const o={state:t,data:d};return t=="INCOMPLETE"&&Object.assign(o,{reason:{required:{taps:2,isAuthor:!0},received:{taps:o.data.taps,isAuthor:o.data.isAuthor}}}),a.manifest.authors.find(function(s){return s.id===x.getCurrentUser().id})?console.log("DoubleTapState",o):void 0},patchHandlers(n){var t=this;if(n.__bcg_patched)return;n.__bcg_patched=!0;let d=Boolean(n.handleTapUsername)&&e.ReactNative.Platform.OS!=="android"&&C.instead("handleTapUsername",n,function(s,l){if(!a.storage.tapUsernameMention)return l.apply(t,s);const u=F.refs[0].current,{messageId:f}=s[0].nativeEvent,c=$.getMessage(u.props?.channel?.id,f);c&&F.insertText(`@${c.author.username}#${c.author.discriminator}`)}),o=Boolean(n.handleTapMessage)&&C.after("handleTapMessage",n,function(s){const{nativeEvent:l}=s[0],u=l.channelId,f=l.messageId;t.currentTapIndex++;let c=setTimeout(function(){t.currentTapIndex=0,t.currentMessageAuthor=null},a.storage.delay);const T=Z.getChannel(u),h=$.getMessage(u,f);if(t.currentTapIndex===1&&(t.currentMessageAuthor=h.author.id),Object.assign(l,{taps:t.currentTapIndex,content:h?.content,authorId:h?.author?.id,isAuthor:h?.author?.id===x.getCurrentUser()?.id}),t.currentTapIndex!==2||t.currentMessageAuthor!==h.author.id)return t.doubleTapState({state:"INCOMPLETE",nativeEvent:l});if(clearTimeout(c),l?.authorId===x.getCurrentUser()?.id){if(a.storage.userEdit){const ae=l.content;ee.startEditMessage(u,f,ae)}else H.createPendingReply({channel:T,message:h,shouldMention:!0});i.findByProps("openSystemKeyboard").openSystemKeyboardForLastCreatedInput();return}a.storage.reply&&(H.createPendingReply({channel:T,message:h,shouldMention:!0}),i.findByProps("openSystemKeyboard").openSystemKeyboardForLastCreatedInput()),t.currentTapIndex=0,t.currentMessageAuthor=null,t.doubleTapState({state:"COMPLETE",nativeEvent:l})});this.unpatchHandlers=function(){d&&d(),o&&o()}},onLoad(){a.storage.tapUsernameMention??=e.ReactNative.Platform.select({android:!1,ios:!0,default:!0}),a.storage.reply??=!0,a.storage.userEdit??=!0,a.storage.delay??=300;const n=this,t=Object.getOwnPropertyDescriptor(M.prototype,"params").get;t&&Object.defineProperty(M.prototype,"params",{configurable:!0,get(){return this&&n.patchHandlers(this),t.call(this)}}),this.unpatchGetter=function(){t&&Object.defineProperty(M.prototype,"params",{configurable:!0,get:t})}},onUnload(){this.unpatchGetter?.(),this.unpatchHandlers?.()},settings:Q};return A.default=te,Object.defineProperty(A,"__esModule",{value:!0}),A})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.plugin,vendetta.ui.components,vendetta.storage,vendetta.ui.assets,vendetta.ui);
