(function(v,c,e,N,a,m,V,r,R){"use strict";var p={Failed:r.getAssetIDByName("Small"),Delete:r.getAssetIDByName("ic_message_delete"),Copy:r.getAssetIDByName("toast_copy_link"),Open:r.getAssetIDByName("ic_leave_stage"),Clipboard:r.getAssetIDByName("pending-alert"),Clock:r.getAssetIDByName("clock"),Forum:r.getAssetIDByName("ic_forum_channel"),Settings:{Toasts:{Settings:r.getAssetIDByName("ic_selection_checked_24px"),Failed:r.getAssetIDByName("ic_close_circle_24px")},Initial:r.getAssetIDByName("coffee"),Update:r.getAssetIDByName("discover"),Locale:r.getAssetIDByName("ic_locale_24px"),External:r.getAssetIDByName("ic_raised_hand_list"),Edit:r.getAssetIDByName("ic_edit_24px"),Reply:r.getAssetIDByName("ic_reply_24px")}},E={shadow:function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.1;return{shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:n,shadowRadius:4.65,elevation:8}},displayToast:function(n,t){e.toasts.open({content:t=="clipboard"?`Copied ${n} to clipboard.`:n,source:t=="clipboard"?p.Clipboard:p.Settings.Initial})}},D={plugin:{source:"https://github.com/MYSTRAVIL/vendetta-plugins"},author:{profile:{"Rosie<3":"https://github.com/acquitelol"}}};const{TouchableOpacity:_,View:w,Image:Y,Text:P,Animated:A}=m.General,O=c.findByProps("transitionToGuild"),U=c.findByStoreName("UserStore"),G=c.findByProps("showUserProfile"),g=e.stylesheet.createThemedStyleSheet({container:{marginTop:25,marginLeft:"5%",marginBottom:-15,flexDirection:"row"},textContainer:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap",...E.shadow()},image:{width:75,height:75,borderRadius:10,...E.shadow()},mainText:{opacity:.975,letterSpacing:.25},header:{color:R.semanticColors.HEADER_PRIMARY,fontFamily:e.constants.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},subHeader:{color:R.semanticColors.HEADER_SECONDARY,fontSize:12.75}});function j(n){let{name:t,authors:d}=n;const i=e.React.useRef(new A.Value(1)).current,s=function(){return A.spring(i,{toValue:1.1,duration:10,useNativeDriver:!0}).start()},o=function(){return A.spring(i,{toValue:1,duration:250,useNativeDriver:!0}).start()},u=function(){return G.showUserProfile({userId:U.getCurrentUser().id})},f={transform:[{scale:i}]};return e.React.createElement(e.React.Fragment,null,e.React.createElement(w,{style:g.container},e.React.createElement(_,{onPress:u,onPressIn:s,onPressOut:o},e.React.createElement(A.View,{style:f},e.React.createElement(Y,{style:[g.image],source:{uri:U?.getCurrentUser()?.getAvatarURL()?.replace("webp","png")}}))),e.React.createElement(w,{style:g.textContainer},e.React.createElement(_,{onPress:function(){return O.openURL(D.plugin.source)}},e.React.createElement(P,{style:[g.mainText,g.header]},t)),e.React.createElement(w,{style:{flexDirection:"row"}},e.React.createElement(P,{style:[g.mainText,g.subHeader]},"A project by"),d.map(function(l,T,y){return e.React.createElement(_,{onPress:function(){return O.openURL(D.author.profile[l.name]??"https://github.com/")}},e.React.createElement(P,{style:[g.mainText,g.subHeader,{paddingLeft:4,fontFamily:e.constants.Fonts.DISPLAY_BOLD,flexDirection:"row"}]},l.name,T<y.length-1?",":null))})))))}const{View:k,Text:W}=m.General,L=e.stylesheet.createThemedStyleSheet({text:{color:R.semanticColors.HEADER_SECONDARY,paddingLeft:"5.5%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:12}});function F(n){let{label:t,children:d}=n;return e.React.createElement(k,{style:{marginTop:10}},e.React.createElement(W,{style:[L.text,L.optionText]},t.toUpperCase()),d)}const{FormRow:h,FormSwitch:x,FormDivider:S,FormInput:z,FormText:K}=m.Forms,{ScrollView:q,View:B,Text:X}=m.General,J=c.findByProps("transitionToGuild","openURL"),b=e.stylesheet.createThemedStyleSheet({icon:{color:R.semanticColors.INTERACTIVE_NORMAL},item:{color:R.semanticColors.TEXT_MUTED,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM},container:{width:"90%",marginLeft:"5%",borderRadius:10,backgroundColor:R.semanticColors.BACKGROUND_MOBILE_SECONDARY,...E.shadow()},subheaderText:{color:R.semanticColors.HEADER_SECONDARY,textAlign:"center",margin:10,marginBottom:50,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:14},image:{width:"100%",maxWidth:350,borderRadius:10}});function Q(){V.useProxy(a.storage);const[n,t]=e.React.useState(a.storage.tapUsernameMention),[d,i]=e.React.useState(a.storage.reply),[s,o]=e.React.useState(a.storage.userEdit),[u,f]=e.React.useState(a.storage.delay),l=e.ReactNative.Platform.OS==="android";return e.React.createElement(q,null,e.React.createElement(j,{name:a.manifest.name,authors:a.manifest.authors}),e.React.createElement(B,{style:{marginTop:20}},e.React.createElement(F,{label:"Preferences"},e.React.createElement(B,{style:[b.container]},e.React.createElement(h,{label:"Tap Username to Mention",subLabel:`Allows you to tap on a username to mention them instead of opening their profile.${l?"This option is disabled on Android.":""}`,onLongPress:function(){return E.displayToast("By default, Discord opens a profile when tapping on a username in chat. With this, it now mentions them, like on Android.","tooltip")},leading:e.React.createElement(h.Icon,{style:b.icon,source:n?p.Forum:p.Failed}),trailing:e.React.createElement(x,{value:l?!1:n,onValueChange:function(){l||(a.storage.tapUsernameMention=!a.storage.tapUsernameMention,t(a.storage.tapUsernameMention))}}),disabled:l}),e.React.createElement(S,null),e.React.createElement(h,{label:"Double Tap To Reply",subLabel:"Allows you to tap double tap on any messages to reply to them.",onLongPress:function(){return E.displayToast("When double tapping on any messages, you can now reply to them!","tooltip")},leading:e.React.createElement(h.Icon,{style:b.icon,source:d?p.Settings.Reply:p.Failed}),trailing:e.React.createElement(x,{value:d,onValueChange:function(){a.storage.reply=!a.storage.reply,i(a.storage.reply)}})}),e.React.createElement(S,null),e.React.createElement(h,{label:`${s?"Editing":"Replying to"} your own messages`,subLabel:`Allows you to tap double tap on any of your own messages to ${s?"reply to":"edit"} them.`,onLongPress:function(){return E.displayToast(`When double tapping on any of your own messages, you can now ${s?"start an edit":"reply to them"}!`,"tooltip")},leading:e.React.createElement(h.Icon,{style:b.icon,source:s?p.Settings.Edit:p.Settings.Reply}),trailing:e.React.createElement(x,{value:s,onValueChange:function(){a.storage.userEdit=!a.storage.userEdit,o(a.storage.userEdit)}})}),e.React.createElement(S,null),e.React.createElement(z,{value:u,onChange:function(T){a.storage.delay=T==""?300:Number(T),f(u)},placeholder:"300",title:"Maximum Delay"}),e.React.createElement(S,null),e.React.createElement(K,{style:{padding:10}},"The maximum delay between taps until the double tap event is cancelled. This is 300ms by default."))),e.React.createElement(F,{label:"Source"},e.React.createElement(B,{style:b.container},e.React.createElement(h,{label:"Source",subLabel:`Open the repository of ${a.manifest.name} externally.`,onLongPress:function(){return E.displayToast(`Opens the repository of ${a.manifest.name} on GitHub in an external page to view any source code of the plugin.`,"tooltip")},leading:e.React.createElement(h.Icon,{style:b.icon,source:p.Open}),trailing:function(){return e.React.createElement(h.Arrow,null)},onPress:function(){return J.openURL(D.plugin.source)}})))),e.React.createElement(X,{style:b.subheaderText},`Build: (${a.manifest.hash.substring(0,8)})`))}const I=c.findByProps("insertText"),Z=c.findByStoreName("ChannelStore"),$=c.findByStoreName("MessageStore"),M=c.findByStoreName("UserStore"),ee=c.findByProps("sendMessage","startEditMessage"),H=c.findByProps("createPendingReply"),{MessagesHandlers:C}=c.findByProps("MessagesHandlers"),te={unpatchGetter:null,unpatchHandlers:null,currentTapIndex:0,currentMessageAuthor:null,doubleTapState(n){let{state:t="UNKNOWN",nativeEvent:d}=n;const i={state:t,data:d};return t=="INCOMPLETE"&&Object.assign(i,{reason:{required:{taps:2,isAuthor:!0},received:{taps:i.data.taps,isAuthor:i.data.isAuthor}}}),a.manifest.authors.find(function(s){return s.id===M.getCurrentUser().id})?console.log("DoubleTapState",i):void 0},patchHandlers(n){var t=this;if(n.__bcg_patched)return;n.__bcg_patched=!0;let d=Boolean(n.handleTapUsername)&&e.ReactNative.Platform.OS!=="android"&&N.instead("handleTapUsername",n,function(s,o){if(!a.storage.tapUsernameMention)return o.apply(t,s);const u=I.refs[0].current,{messageId:f}=s[0].nativeEvent,l=$.getMessage(u.props?.channel?.id,f);l&&I.insertText(`@${l.author.username}#${l.author.discriminator}`)}),i=Boolean(n.handleTapMessage)&&N.after("handleTapMessage",n,function(s){const{nativeEvent:o}=s[0],u=o.channelId,f=o.messageId;t.currentTapIndex++;let l=setTimeout(function(){t.currentTapIndex=0,t.currentMessageAuthor=null},a.storage.delay);const T=Z.getChannel(u),y=$.getMessage(u,f);if(t.currentTapIndex===1&&(t.currentMessageAuthor=y.author.id),Object.assign(o,{taps:t.currentTapIndex,content:y?.content,authorId:y?.author?.id,isAuthor:y?.author?.id===M.getCurrentUser()?.id}),t.currentTapIndex!==2||t.currentMessageAuthor!==y.author.id)return t.doubleTapState({state:"INCOMPLETE",nativeEvent:o});if(clearTimeout(l),o?.authorId===M.getCurrentUser()?.id){if(a.storage.userEdit){const ae=o.content;ee.startEditMessage(u,f,ae)}else H.createPendingReply({channel:T,message:y,shouldMention:!0});I.openSystemKeyboard();return}a.storage.reply&&(H.createPendingReply({channel:T,message:y,shouldMention:!0}),I.openSystemKeyboard()),t.currentTapIndex=0,t.currentMessageAuthor=null,t.doubleTapState({state:"COMPLETE",nativeEvent:o})});this.unpatchHandlers=function(){d&&d(),i&&i()}},onLoad(){a.storage.tapUsernameMention??=e.ReactNative.Platform.select({android:!1,ios:!0,default:!0}),a.storage.reply??=!0,a.storage.userEdit??=!0,a.storage.delay??=300;const n=this,t=Object.getOwnPropertyDescriptor(C.prototype,"params").get;t&&Object.defineProperty(C.prototype,"params",{configurable:!0,get(){return this&&n.patchHandlers(this),t.call(this)}}),this.unpatchGetter=function(){t&&Object.defineProperty(C.prototype,"params",{configurable:!0,get:t})}},onUnload(){this.unpatchGetter?.(),this.unpatchHandlers?.()},settings:Q};return v.default=te,Object.defineProperty(v,"__esModule",{value:!0}),v})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.plugin,vendetta.ui.components,vendetta.storage,vendetta.ui.assets,vendetta.ui);
